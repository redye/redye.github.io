<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="iOS,Cocoapods,">










<meta name="description" content="åˆ¶ä½œä¸€ä¸ª framework é™¤äº†ä½¿ç”¨ Xcode åˆ›å»ºä¸€ä¸ª framework çš„å·¥ç¨‹å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰åˆ«çš„åŠæ³•å‘¢ï¼Ÿè¿™é‡Œæ—¢ç„¶æ˜¯ä¸€ä¸ª CocoaPods çš„æ•™ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶æ˜¯å¸Œæœ›èƒ½é€šè¿‡ cocoapods æ¥å®Œæˆã€‚cocoapods æä¾›äº†ä¸€ä¸ªæ’ä»¶æ¥å¸®åŠ©ä½ ã€‚">
<meta name="keywords" content="iOS,Cocoapods">
<meta property="og:type" content="article">
<meta property="og:title" content="ç§æœ‰åº“æ‰“åŒ… framework">
<meta property="og:url" content="http://redye.com/2018/10/09/private-pods-framework/index.html">
<meta property="og:site_name" content="çº¢çº¢ã®">
<meta property="og:description" content="åˆ¶ä½œä¸€ä¸ª framework é™¤äº†ä½¿ç”¨ Xcode åˆ›å»ºä¸€ä¸ª framework çš„å·¥ç¨‹å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰åˆ«çš„åŠæ³•å‘¢ï¼Ÿè¿™é‡Œæ—¢ç„¶æ˜¯ä¸€ä¸ª CocoaPods çš„æ•™ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶æ˜¯å¸Œæœ›èƒ½é€šè¿‡ cocoapods æ¥å®Œæˆã€‚cocoapods æä¾›äº†ä¸€ä¸ªæ’ä»¶æ¥å¸®åŠ©ä½ ã€‚">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://i.loli.net/2018/09/29/5baf282dc3a1c.png">
<meta property="og:image" content="https://i.loli.net/2018/09/29/5baf282fc137b.png">
<meta property="og:updated_time" content="2019-04-18T07:05:07.945Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ç§æœ‰åº“æ‰“åŒ… framework">
<meta name="twitter:description" content="åˆ¶ä½œä¸€ä¸ª framework é™¤äº†ä½¿ç”¨ Xcode åˆ›å»ºä¸€ä¸ª framework çš„å·¥ç¨‹å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰åˆ«çš„åŠæ³•å‘¢ï¼Ÿè¿™é‡Œæ—¢ç„¶æ˜¯ä¸€ä¸ª CocoaPods çš„æ•™ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶æ˜¯å¸Œæœ›èƒ½é€šè¿‡ cocoapods æ¥å®Œæˆã€‚cocoapods æä¾›äº†ä¸€ä¸ªæ’ä»¶æ¥å¸®åŠ©ä½ ã€‚">
<meta name="twitter:image" content="https://i.loli.net/2018/09/29/5baf282dc3a1c.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://redye.com/2018/10/09/private-pods-framework/">





  <title>ç§æœ‰åº“æ‰“åŒ… framework | çº¢çº¢ã®</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">çº¢çº¢ã®</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://redye.com/2018/10/09/private-pods-framework/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å°çº¢">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="çº¢çº¢ã®">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ç§æœ‰åº“æ‰“åŒ… framework</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-10-09T17:11:42+08:00">
                2018-10-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/å·¥å…·ä»£ç /" itemprop="url" rel="index">
                    <span itemprop="name">å·¥å…·ä»£ç </span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>åˆ¶ä½œä¸€ä¸ª framework é™¤äº†ä½¿ç”¨ Xcode åˆ›å»ºä¸€ä¸ª framework çš„å·¥ç¨‹å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰åˆ«çš„åŠæ³•å‘¢ï¼Ÿè¿™é‡Œæ—¢ç„¶æ˜¯ä¸€ä¸ª CocoaPods çš„æ•™ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶æ˜¯å¸Œæœ›èƒ½é€šè¿‡ cocoapods æ¥å®Œæˆã€‚<br>cocoapods æä¾›äº†ä¸€ä¸ªæ’ä»¶æ¥å¸®åŠ©ä½ ã€‚</p>
<a id="more"></a>
<p><a href="https://github.com/CocoaPods/cocoapods-packager" target="_blank" rel="noopener">CocoaPods-Packager</a></p>
<h3 id="CocoaPods-Packager-å®‰è£…ä¸ä½¿ç”¨"><a href="#CocoaPods-Packager-å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="CocoaPods-Packager å®‰è£…ä¸ä½¿ç”¨"></a>CocoaPods-Packager å®‰è£…ä¸ä½¿ç”¨</h3><p>æ¥ä¸‹æ¥å°±æ˜¯ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…å®ƒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo gem install cocoapods-packager</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ‰“åŒ… framework</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod package WFRFoundation.podspec [--force] [--library] [--verbose] ...</span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤åé¢çš„å‚æ•°è¯´æ˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¼ºåˆ¶è¦†ç›–ä¹‹å‰å·²ç»ç”Ÿæˆè¿‡çš„äºŒè¿›åˆ¶åº“</span><br><span class="line">--force </span><br><span class="line"></span><br><span class="line"># ç”ŸæˆåµŒå…¥å¼ .framework (é™æ€ framework)</span><br><span class="line">--embedded </span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆé™æ€ .a </span><br><span class="line">--library </span><br><span class="line"></span><br><span class="line"># ç”ŸæˆåŠ¨æ€ .framework </span><br><span class="line">--dynamic </span><br><span class="line"></span><br><span class="line"># åŠ¨æ€ .framework æ˜¯éœ€è¦ç­¾åçš„ï¼Œæ‰€ä»¥åªæœ‰ç”ŸæˆåŠ¨æ€åº“çš„æ—¶å€™éœ€è¦è¿™ä¸ª BundleId </span><br><span class="line">--bundle-identifier</span><br><span class="line"></span><br><span class="line"># ä¸åŒ…å«ä¾èµ–çš„ç¬¦å·è¡¨ï¼Œç”ŸæˆåŠ¨æ€åº“çš„æ—¶å€™ä¸èƒ½åŒ…å«è¿™ä¸ªå‘½ä»¤</span><br><span class="line"># åŠ¨æ€åº“ä¸€å®šéœ€è¦åŒ…å«ä¾èµ–çš„ç¬¦å·è¡¨ã€‚ </span><br><span class="line">--exclude-deps</span><br><span class="line"></span><br><span class="line"># è¡¨ç¤ºç”Ÿæˆçš„åº“æ˜¯ debug è¿˜æ˜¯ releaseï¼Œé»˜è®¤æ˜¯ release</span><br><span class="line"># --configuration=Debug </span><br><span class="line">--configuration</span><br><span class="line"></span><br><span class="line"># è¡¨ç¤ºä¸ä½¿ç”¨ name mangling æŠ€æœ¯ï¼Œpod package é»˜è®¤æ˜¯ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯çš„ã€‚</span><br><span class="line"># * æˆ‘ä»¬èƒ½åœ¨ç”¨ pod package ç”ŸæˆäºŒè¿›åˆ¶åº“çš„æ—¶å€™ä¼šçœ‹åˆ°ç»ˆç«¯æœ‰è¾“å‡º Mangling symbols å’Œ Building mangled frameworkï¼Œè¡¨ç¤ºä½¿ç”¨äº†è¿™ä¸ªæŠ€æœ¯ã€‚</span><br><span class="line"># * å¦‚æœä½ çš„ pod åº“æ²¡æœ‰å…¶ä»–é™æ€åº“(*.a/*.framework)ä¾èµ–çš„è¯ï¼Œé‚£ä¹ˆä¸ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚</span><br><span class="line"># * ä½†æ˜¯å¦‚æœæœ‰å…¶ä»–é™æ€åº“ä¾èµ–ï¼Œä¸ä½¿ç”¨ --no-mangle è¿™ä¸ªå‘½ä»¤çš„è¯ï¼Œé‚£ä¹ˆä½ åœ¨å·¥ç¨‹é‡Œä½¿ç”¨ç”Ÿæˆçš„äºŒè¿›åˆ¶åº“çš„æ—¶å€™å°±ä¼šæŠ¥é”™ï¼šUndefined symbols for architecture x86_64ã€‚</span><br><span class="line">--no-mangle</span><br><span class="line"></span><br><span class="line"># å¦‚æœä½ çš„ pod åº“æœ‰ subspecï¼Œé‚£ä¹ˆåŠ ä¸Šè¿™ä¸ªå‘½åè¡¨ç¤ºåªç»™æŸä¸ªæˆ–å‡ ä¸ª subspec ç”ŸæˆäºŒè¿›åˆ¶åº“</span><br><span class="line"># * --subspecs=subspec1,subspec2</span><br><span class="line"># * ç”Ÿæˆçš„åº“çš„åå­—å°±æ˜¯ä½  podspec çš„åå­—ï¼Œå¦‚æœä½ æƒ³ç”Ÿæˆçš„åº“çš„åå­—è·Ÿ subspec çš„åå­—ä¸€æ ·ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹ podspec çš„åå­—ã€‚ </span><br><span class="line"># * è¿™ä¸ªè„šæœ¬å°±æ˜¯æ‰¹é‡ç”Ÿæˆ subspec çš„äºŒè¿›åˆ¶åº“</span><br><span class="line">--subspecs</span><br><span class="line"></span><br><span class="line"># ä¸€äº›ä¾èµ–çš„ source</span><br><span class="line"># * å¦‚æœä½ æœ‰ä¾èµ–æ˜¯æ¥è‡ªäºç§æœ‰åº“çš„ï¼Œé‚£å°±éœ€è¦åŠ ä¸Šé‚£ä¸ªç§æœ‰åº“çš„ source</span><br><span class="line"># * é»˜è®¤æ˜¯ cocoapods çš„ Specs ä»“åº“ã€‚</span><br><span class="line"># * --spec-sources=private,https://github.com/CocoaPods/Specs.gitã€‚</span><br><span class="line">--spec-sources</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼Œåœ¨ <code>pod package</code> ä¹‹å‰ï¼Œä½ éœ€è¦å°†ä»£ç æäº¤åˆ°è¿œç¨‹ï¼Œå¹¶ä¸”æ‰“ä¸Š tagï¼Œå› ä¸º pod package æ˜¯é€šè¿‡git çš„ commit ç´¢å¼•æˆ–è€… tag æ¥æ‰¾æºç çš„.å› æ­¤å¯¹å¤–å‘å¸ƒæ—¶å€™ä¸€å®šè¦åœ¨ s.version ä¸­æŒ‡å®štag çš„æ ‡ç­¾ï¼Œåœ¨ git ä¸­ç»™å®šçš„ commit æ‰“ä¸Š tagã€‚</strong></p>
<p>ğŸŒ°ğŸŒ°ğŸŒ°</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod package WFRFoundation.podspec --force</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜æ˜¯æ— æ³•é¿å…è¸©åˆ°å‘ï¼Œç¼–è¯‘æ‰§è¡Œåä¼šæŠ¥äº†å¦‚ä¸‹é”™è¯¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Undefined symbols for architecture x86_64:</span><br><span class="line">  &quot;_OBJC_CLASS_$_ASIdentifierManager&quot;, referenced from:</span><br><span class="line">      objc-class-ref in WFRFoundation(WFRXxx.o)</span><br><span class="line">ld: symbol(s) not found for architecture arm64</span><br><span class="line">clang: error: linker command failed with exit code 1 (use -v to see invocation)</span><br></pre></td></tr></table></figure>
<p>åŸè°…æ­¤å¤„çš„æˆ‘ o((âŠ™ï¹âŠ™))o<br>å¤§å®¶çœ‹åˆ°è¿™ä¸ªé”™è¯¯ï¼Œæ˜¯ä¸æ˜¯éƒ½æœ‰ä¸€ç§å¾ˆç†Ÿæ‚‰çš„æ„Ÿè§‰ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªåšè¿‡ iOS å¼€å‘çš„å°ä¼™ä¼´åº”è¯¥éƒ½é‡åˆ°è¿‡ï¼Œç‰¹åˆ«æ˜¯å¼€å‘è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°ç¬¬ä¸‰æ–¹åº“æˆ–æ¡†æ¶çš„æ—¶å€™ã€‚</p>
<p>ä»é”™è¯¯æ¥çœ‹ï¼Œä»–è¯´ä¸æ”¯æŒ x86_64 çš„æ¶æ„ï¼Œé‚£å¥½ï¼Œæ¢æˆçœŸæœºå†è¯•ä¸€æ¬¡ï¼Œè¿™æ¬¡æ¢æˆä¸æ”¯æŒ arm64 çš„æ¶æ„äº†â€¦</p>
<p>pod package çœŸçš„è¿™ä¹ˆè ¢çš„å—ï¼Œç›¸ä¿¡æˆ‘ï¼Œåšä¸ºä¸€ä¸ªç»è¿‡æ—¶é—´æ£€éªŒçš„å·¥å…·ä¸ä¼šè¿™ä¹ˆ low çš„ï¼Œé”™çš„è¿˜æ˜¯è‡ªå·±</p>
<p>ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ framework æ”¯æŒçš„æ¶æ„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lipo -info WFRFoundation.framework/WFRFoundation</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºçš„ç»“æœå¾ˆæ­£å¸¸ï¼Œæ¨¡æ‹Ÿå™¨ã€æ‰‹æœºæ¶æ„éƒ½æ”¯æŒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Architectures in the fat file: WFRFoundation.framework/WFRFoundation are: armv7 armv7s i386 x86_64 arm64</span><br></pre></td></tr></table></figure>
<p>é‚£ä¸ºä»€ä¹ˆè¿˜ä¼šå‡ºç°è¿™ç§é”™è¯¯å‘¢ï¼Œé¦–å…ˆæˆ‘ä»¬æŸ¥çœ‹ä¸‹ framework æ˜¯é™æ€çš„è¿˜æ˜¯åŠ¨æ€çš„ï¼Œcd åˆ° WFRFoundation.framework ç›®å½•ä¸‹ï¼Œ<code>file WFRFoundation</code> æŸ¥çœ‹åº“æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">WFRFoundation: Mach-O universal binary with 5 architectures: [arm_v7:current ar archive] [arm64]</span><br><span class="line">WFRFoundation (for architecture armv7):	current ar archive</span><br><span class="line">WFRFoundation (for architecture armv7s):	current ar archive</span><br><span class="line">WFRFoundation (for architecture i386):	current ar archive</span><br><span class="line">WFRFoundation (for architecture x86_64):	current ar archive</span><br><span class="line">WFRFoundation (for architecture arm64):	current ar archive</span><br></pre></td></tr></table></figure>
<p>æœ‰ dynamically æ ‡è¯†ç€æ˜¯åŠ¨æ€åº“ï¼Œåä¹‹åˆ™æ˜¯é™æ€åº“ã€‚</p>
<p>ä»è¿™é‡Œçœ‹å‡ºæ¥ï¼Œ<code>pod package</code> é»˜è®¤æ‰“åŒ…é™æ€åº“ã€‚</p>
<p>æ—¢ç„¶ä¸æ˜¯æŒ‡ä»¤é›†çš„é—®é¢˜ï¼Œé‚£å°±åº”è¯¥æ˜¯é“¾æ¥é™æ€åº“çš„æ—¶å€™å‡ºé—®é¢˜äº†ï¼ŒæŒ‰ç…§å¤§å¤šæ•°çš„è§£å†³åŠæ³•ï¼Œåªéœ€è¦åœ¨ Linked Frameworks and Libraries ä¸­æ·»åŠ æŒ‡å®šçš„é™æ€åº“ã€‚ä½†æ˜¯è¿™é‡Œä¼šä¸ä¸€æ ·ï¼Œè¿™æ ¹ CocoaPods çš„è¿è¡ŒåŸç†æœ‰å…³ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Build Phases å¤„çœ‹åˆ°ï¼Œè¦ä»¥æ¥çš„ framework æ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šæŠ¥é”™å‘¢ï¼Ÿ</p>
<p>æœ€åæ³¨æ„åˆ° <strong><code>_ASIdentifierManager</code></strong>ï¼Œå› ä¸ºè¿™é‡Œæœ‰å¼•ç”¨åˆ° <code>AdSupport</code> çš„åº“ï¼Œè€Œé™æ€åº“åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨å¯¼å…¥é™æ€åº“æ‰€æœ‰ä¾èµ–çš„å…¶ä»–ç±»åº“ï¼ˆå½“ç„¶ä¹ŸåŒ…æ‹¬ç³»ç»Ÿç±»åº“å•¦ï¼Œè¿™çœŸæ˜¯ä¸€ä»¶æ‚²ä¼¤çš„äº‹æƒ… ğŸ˜­ï¼‰ï¼ŒçŸ¥é“äº†åŸå› å°±å¥½è¯´äº†ï¼Œè§£å†³åŠæ³•æœ‰ä¸‰ä¸ªï¼š</p>
<ol>
<li>åœ¨ Build Phases -&gt; Linked Frameworks and Libraries ä¸‹é¢æ·»åŠ  AdSupport.frameworkï¼Œè¿™æ ·å°±å¤±å»äº†ä½¿ç”¨ cocoapods çš„ä¼˜åŠ¿äº†å•Šå–‚ğŸ‘</li>
<li><p>åœ¨ podspecs ä¸­åŠ å…¥ç³»ç»Ÿç±»åº“çš„ä¾èµ–</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è¿™é‡Œæˆ‘é¡ºä¾¿æŠŠ Foundation çš„ä¾èµ–ä¹ŸåŠ è¿›å»äº†</span><br><span class="line"># * ä¸ºä»€ä¹ˆ Foundation æ²¡åŠ ä¹‹å‰æ²¡æŠ¥é”™å‘¢</span><br><span class="line"># * iOS å·¥ç¨‹æ˜¯ç¦»ä¸å¼€ Foundation çš„ï¼Œä¼šè‡ªåŠ¨å¼•å…¥</span><br><span class="line">s.frameworks = &apos;AdSupport&apos;, &apos;Foundation&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨åŠ¨æ€ç±»åº“</p>
 <figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod package WFRFoundation.podspec --force --dynamic</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>æ‰“åŒ…å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°å…ˆæµ‹è¯•ä¸€ä¸‹ï¼Œä¿®æ”¹ Podfile æ–‡ä»¶</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># pod 'WFRFoundation', :path =&gt; '../'</span></span><br><span class="line">pod <span class="string">'WFRFoundation'</span>, <span class="symbol">:path</span> =&gt; <span class="string">'../WFRFoundation-0.1.0/'</span></span><br></pre></td></tr></table></figure>
<p><code>pod install</code> æˆ–è€… <code>pod update</code> éƒ½æ˜¯é€šè¿‡ podspec æ–‡ä»¶æ¥è¿›è¡Œè¯»å–çš„ï¼Œæ‰€ä»¥ <code>path =&gt;</code> æŒ‡å®šçš„è·¯å¾„å³ podspec æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œ<code>pod package</code> åœ¨æ‰“åŒ…å®Œæˆåä¼šå¸®æˆ‘ä»¬ç”Ÿæˆè‡ªå·±çš„ podspec æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ­£ç¡®æŒ‡å®šè¿™ä¸ªè·¯å¾„å°±å¯ä»¥äº†</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>pod package</code> ç”Ÿæˆçš„ podspec æ–‡ä»¶é‡Œå¹¶æ²¡æœ‰æˆ‘ä»¬æŒ‡å®šçš„éœ€è¦çš„ä¾èµ–ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åŠ ä¸Š</p>
<p>åœ¨ <code>pod update</code> åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ framework è¢«æ­£ç¡®çš„å¼•å…¥è¿›æ¥äº†ï¼Œso happy~</p>
<p>è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œç›´æ¥æ‰§è¡Œ <code>pod update</code> ä¼šé»˜è®¤å…ˆå»æ›´æ–° Cocoapods çš„ repo ä»“åº“ï¼Œé‡ä¸Šç½‘é€Ÿæ¸£çš„æ—¶å€™ï¼Œé‚£å°±å‘µå‘µäº†ğŸ™ƒã€‚è¿™é‡Œæˆ‘ä»¬æ˜¯ç›´æ¥ä»æœ¬åœ°çš„ path é“¾æ¥ frameworkï¼Œæ˜¯ä¸éœ€è¦æ›´æ–°çš„ï¼Œå¸¦ä¸Šä¸‹é¢çš„å‚æ•°</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod update --no-repo-update</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œpod æ›´æ–°çš„é€Ÿåº¦å¾ˆå¿«ï¼Œå’»~</p>
<p>ç°åœ¨ï¼Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹æˆ‘ä»¬çš„ podspec æ–‡ä»¶äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ­£ç¡®çš„é“¾æ¥ framework</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">s.ios.deployment_target    = <span class="string">'8.0'</span></span><br><span class="line"><span class="comment"># s.ios.vendored_frameworks   = 'WFRFoundation-0.1.0/ios/WFRFoundation.framework'</span></span><br><span class="line">s.ios.vendored_frameworks = <span class="string">"<span class="subst">#&#123;s.name&#125;</span>-<span class="subst">#&#123;s.version.to_s&#125;</span>/ios/<span class="subst">#&#123;s.name&#125;</span>.framework"</span></span><br><span class="line">s.frameworks = <span class="string">'AdSupport'</span>, <span class="string">'Foundation'</span></span><br><span class="line">s.dependency <span class="string">'CocoaLumberjack'</span>, <span class="string">'&gt;=3.2.0'</span></span><br><span class="line">s.dependency <span class="string">'YYModel'</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘æ˜¯ä½¿ç”¨çš„å˜é‡çš„æ–¹å¼ï¼Œæ¥å¼•å…¥ framework çš„ï¼Œä»”ç»†çœ‹ <strong><code>s.ios.vendored_framework = &quot;...&quot;</code></strong> è¿™é‡Œå¿…é¡»è¦ä½¿ç”¨ <strong>åŒå¼•å·</strong>ï¼Œ è¿™ä¸ªæ˜¯ ruby çš„è¯­æ³•ï¼Œå•å¼•å·çš„è¯ï¼Œè¡¨ç¤ºçš„å­—ç¬¦ä¸²ï¼Œä¼šåŸæ ·è¾“å‡ºé‡Œé¢çš„å†…å®¹ ğŸ¤·â€â™€ï¸ã€‚å¯ä»¥æ‰“å°çœ‹çœ‹ç»“æœ </p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">puts <span class="string">'<span class="subst">#&#123;s.name&#125;</span>-<span class="subst">#&#123;s.version.to_s&#125;</span>/ios/<span class="subst">#&#123;s.name&#125;</span>.framework'</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œéœ€è¦æˆ‘ä»¬åšçš„å·¥ä½œéƒ½åšå®Œäº†ï¼Œé‚£æˆ‘ä»¬å°±æ„‰å¿«çš„å°† podspec æ–‡ä»¶ push çš„ spec ä»“åº“è¯•è¯•å§</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod repo push specName WFRFoundation.podspec --allow-warnings --use-libraries --verbose</span><br></pre></td></tr></table></figure>
<p>åœ¨ push  æ“ä½œä¹‹å‰ï¼Œè¿˜å¯ä»¥éªŒè¯ä¸‹æˆ‘ä»¬çš„ podspecï¼ˆä¸€èˆ¬æˆ‘ä»¬ä¼šå…è®¸è­¦å‘Šçš„ğŸ˜ˆï¼‰ï¼Œå½“ç„¶ï¼Œä¸éªŒè¯ä¹Ÿæ²¡å…³ç³»ï¼Œpush é˜¶æ®µè¿˜æ˜¯ä¼šå…ˆå¸®ä½ éªŒè¯å®ƒçš„ï¼Œä¸é€šè¿‡éªŒè¯ï¼Œæ˜¯æ¨é€ä¸æˆåŠŸçš„ã€‚</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod lib lint WFRFoundation.podspec --allow-warnings --verbose</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶æˆ‘ä»¬å¾ˆæ„‰å¿«çš„å°è¯• pushï¼Œä½†æ˜¯å¾ˆå¯æƒœ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- ERROR | [iOS] file patterns: The `vendored_frameworks` pattern did not match any file.</span><br></pre></td></tr></table></figure>
<p>è¿™å¥è¯çš„æ„æ€æ˜¯æŒ‡å®šçš„ç¬¬ä¸‰æ–¹ framework æ‰¾ä¸åˆ°åŒ¹é…çš„æ–‡ä»¶ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢</p>
<p>åœ¨éªŒè¯ podspec æ–‡ä»¶æ—¶ï¼ŒåŒæ ·æ˜¯æ ¹æ® podspec æ–‡ä»¶é‡Œé¢ git çš„ tag æ¥æŸ¥æ‰¾æºç çš„ï¼Œè€Œæˆ‘ä»¬çš„ pod package ä¹Ÿæ˜¯åœ¨ tag ä¹‹åæ‰è¿›è¡Œçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æäº¤çš„ framework å°±ä¸åœ¨è¿™ä¸ª tag ä¸‹<br><img src="https://i.loli.net/2018/09/29/5baf282dc3a1c.png" alt="commit"></p>
<p>è¿™ç§æƒ…å†µåº”è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p>
<p>æˆ‘èƒ½æƒ³åˆ°çš„è§£å†³åŠæ³•æ˜¯ï¼Œé‡æ–°æ‰“ tagï¼Œå¹¶æ¨é€åˆ°è¿œç¨‹è¦†ç›–ä¹‹å‰çš„æ ‡ç­¾ï¼Œè¿™ç§æ–¹æ³•ä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ‰ç‚¹å‚»ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æ²¡æœ‰æƒ³åˆ°æ›´å¥½çš„è§£å†³åŠæ³• ğŸ˜‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git tag -d 0.1.0  # åˆ é™¤æœ¬åœ°æ ‡ç­¾</span><br><span class="line">git tag 0.1.0	   # æ–°çš„æ ‡ç­¾</span><br><span class="line">git push origin --delete tag 0.1.0 # åˆ é™¤è¿œç¨‹æ ‡ç­¾</span><br><span class="line">git push origin --tags  # æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2018/09/29/5baf282fc137b.png" alt="commit"><br>é‡æ–°éªŒè¯ï¼Œé€šè¿‡äº† ğŸ‰ğŸ‰ğŸ‰</p>
<p><strong>å¦å¤–ä¸€ç§è§£å†³åŠæ³•</strong></p>
<p>æˆ‘ä»¬çŸ¥é“ pod package æ˜¯æ ¹æ® podspec é‡Œé¢ source æ‰€åœ¨ tag ä¸‹è½½æºç çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å…ˆå°† source æ”¹æˆæœ¬åœ°çš„</p>
<blockquote>
<p>s.sourceæ˜¯å·¥ç¨‹åœ°å€ã€‚å¯ä»¥æ˜¯æœ¬åœ°è·¯å¾„ï¼Œsvnï¼ŒzipåŒ…ï¼Œæˆ–è€…æ˜¯gitä¸Šçš„ä»£ç ã€‚åªæ˜¯å†™æ³•ä¸ä¸€æ ·ã€‚</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">/<span class="regexp">/ æœ¬åœ°æ–‡ä»¶</span></span><br><span class="line"><span class="regexp">s.source = &#123; :path =&gt; '~/</span>Document/WFRFoundation<span class="string">', :tag =&gt; s.version.to_s &#125;    </span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">// git</span></span><br><span class="line"><span class="string">s.source = &#123; :git =&gt; '</span><span class="symbol">https:</span>/<span class="regexp">/github.com/redye</span><span class="regexp">/wfrfoundation.git', :tag =&gt; s.version.to_s &#125;    </span></span><br><span class="line"><span class="regexp">	</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ zip </span></span><br><span class="line"><span class="regexp">s.source = &#123; :http=&gt; 'http:/</span><span class="regexp">/xxx.zip', :tag =&gt; "1.0.0" &#125;</span></span><br><span class="line"><span class="regexp">	</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ svn</span></span><br><span class="line"><span class="regexp">s.source = &#123; :svn=&gt; 'http:/</span><span class="regexp">/path', :tag =&gt; "1.0.0" &#125;</span></span><br></pre></td></tr></table></figure>
<p>å¾ˆå¯æƒœï¼Œpod package å¹¶ä¸æ”¯æŒ path çš„æ–¹å¼</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">Unsupported download strategy <span class="string">`&#123;:path=&gt;"~/Documents/WFRFoundation", :tag=&gt;"0.1.0"&#125;`</span>.</span><br></pre></td></tr></table></figure>
<h3 id="use-frameworks"><a href="#use-frameworks" class="headerlink" title="use_frameworks!"></a>use_frameworks!</h3><p>å¦‚æœä¸ä½¿ç”¨ <code>use_frameworks!</code>ï¼ŒPods é¡¹ç›®æœ€ç»ˆä¼šç¼–è¯‘æˆä¸€ä¸ªåä¸º libPods-ProjectName.a çš„æ–‡ä»¶ï¼Œä¸»é¡¹ç›®åªéœ€è¦ä¾èµ–è¿™ä¸ª .a æ–‡ä»¶å³å¯ã€‚</p>
<p>ä½¿ç”¨ <code>use_frameworks!</code>ï¼ŒPods é¡¹ç›®æœ€ç»ˆä¼šç¼–è¯‘æˆä¸€ä¸ªåä¸º Pods-ProjectName.framework çš„æ–‡ä»¶ï¼Œä¸»é¡¹ç›®åªéœ€è¦ä¾èµ–è¿™ä¸ª .framework æ–‡ä»¶å³å¯ã€‚</p>
<p>åœ¨ Swift é¡¹ç›®ä¸­æ˜¯ä¸æ”¯æŒé™æ€åº“çš„ï¼Œæ‰€ä»¥åœ¨ Swift é¡¹ç›®ï¼ŒCocoaPods æä¾›äº†åŠ¨æ€ Framework çš„æ”¯æŒï¼Œé€šè¿‡ use_frameworks! é€‰é¡¹æ§åˆ¶ã€‚</p>
<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><h4 id="é™æ€åº“ä¼ é€’é—®é¢˜"><a href="#é™æ€åº“ä¼ é€’é—®é¢˜" class="headerlink" title="é™æ€åº“ä¼ é€’é—®é¢˜"></a>é™æ€åº“ä¼ é€’é—®é¢˜</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">target has transitive dependencies that include static binaries</span><br></pre></td></tr></table></figure>
<p>åœºæ™¯ï¼š</p>
<blockquote>
<p>libB dependency libA <br><br>use_frameworks! <br><br>libA æ˜¯ä¸€ä¸ªé™æ€ framework</p>
</blockquote>
<p>åŸå› ï¼š</p>
<p>åœ¨ä¸ä½¿ç”¨ <code>use_frameworks!</code> æ ‡è®°æ—¶ï¼ŒåµŒå¥—çš„ç¬¬ä¸‰æ–¹åº“ç›´æ¥é€šè¿‡ <code>-l</code> çš„æ–¹å¼é“¾æ¥åˆ°é¡¹ç›®ä¸­ï¼Œè€Œ B åº“åªç¼–è¯‘è‡ªå·±çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥æ‰€æœ‰çš„äº’ç›¸ä¼ é€’çš„ä¾èµ–çš„é™æ€åº“éƒ½èƒ½æœ€ç»ˆè¢«å¯¼å…¥ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ <code>use_frameworks!</code>ï¼Œæ‰“åŒ…çš„ framework å¯èƒ½ä¼šåŒ…å« <code>vendored_libraries</code> æˆ–è€… <code>vendored_frameworks</code> åº“ä¸­çš„å†…å®¹ï¼Œæ‰€ä»¥è¿™é‡Œå°±æœ‰ä¸€ä¸ªç¬¦å·å†²çªçš„é—®é¢˜äº†ã€‚è€Œ CocoaPods å¯¹äºè¿™ç§é—®é¢˜ï¼Œç»Ÿä¸€é€šè¿‡æŠ¥é”™æ¥æ‹’ç»è¿™ç§æƒ…å†µã€‚</p>
<p>é™æ€åº“é“¾æ¥çš„ä¸‰ç§æ–¹å¼</p>
<ul>
<li>-ObjC</li>
<li>-all_load</li>
<li>-force_load</li>
</ul>
<p>å‚è€ƒ <a href="https://www.valiantcat.cn/index.php/2017/04/24/45.html#menu_index_7" target="_blank" rel="noopener">ç»„ä»¶åŒ–-åŠ¨æ€åº“å®æˆ˜</a></p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>ç¬¬ä¸€ç§ï¼šlibA æ‰“åŒ…æˆåŠ¨æ€ frameworkã€‚è¿™æ˜¯æœ€ç®€å•å’Œå¿«é€Ÿçš„æ–¹æ³•äº†ã€‚ä½†æ˜¯ä¸€èˆ¬å¹¶ä¸æ¨èæ‰“åŒ…æˆåŠ¨æ€ framework ã€‚è‡³äºä¸ºä»€ä¹ˆä¸æ¨èï¼Œ<a href="https://github.com/Damonvvong/DevNotes/blob/master/Notes/framework2.md" target="_blank" rel="noopener">iOS å¼€å‘ä¸­çš„ã€åº“ã€</a></p>
<blockquote>
<p>èƒ½å¦åŠ¨æ€åº“çš„æ–¹å¼æ¥åŠ¨æ€æ›´æ–°AppStoreä¸Šçš„ç‰ˆæœ¬å‘¢ï¼Ÿ</p>
<ul>
<li><p>åŸæœ¬æ˜¯æ‰“ç®—å›½åº†çš„æ—¶å€™è¯•ä¸€è¯• AppStore ä¸Šåˆ°åº•è¡Œä¸è¡Œçš„ï¼Œç»“æœè¿˜æ˜¯æ‰˜ <a href="https://weibo.com/casatwy?display=0&amp;retcode=6102" target="_blank" rel="noopener">@Casa Taloyum å¤§ç¥</a> è€å¸æœºçš„æœï¼Œä»–å·²ç»è¸©è¿‡è¿™ä¸ªå‘äº†ï¼Œä»–çš„ç»“è®ºæ˜¯ï¼šä½¿ç”¨åŠ¨æ€åº“çš„æ–¹å¼æ¥åŠ¨æ€æ›´æ–°åªèƒ½ç”¨åœ¨ in house å’Œdevelop æ¨¡å¼å´ä½†ä¸èƒ½åœ¨ä½¿ç”¨åˆ° AppStoreã€‚</p>
</li>
<li><p>å› ä¸ºåœ¨ä¸Šä¼ æ‰“åŒ…çš„æ—¶å€™ï¼Œè‹¹æœä¼šå¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡Œä¸€æ¬¡ Code Singingï¼ŒåŒ…æ‹¬ app å¯æ‰§è¡Œæ–‡ä»¶å’Œæ‰€æœ‰Embedded çš„åŠ¨æ€åº“ã€‚å› æ­¤ï¼Œåªè¦ä½ ä¿®æ”¹äº†æŸä¸ªåŠ¨æ€åº“çš„ä»£ç ï¼Œå¹¶é‡æ–°ç­¾åï¼Œé‚£ä¹ˆ MD5 çš„å“ˆå¸Œå€¼å°±ä¼šä¸ä¸€æ ·ï¼Œåœ¨åŠ è½½åŠ¨æ€åº“çš„æ—¶å€™ï¼Œè‹¹æœä¼šæ£€éªŒè¿™ä¸ª hash å€¼ï¼Œå½“è‹¹æœç›‘æµ‹åˆ°è¿™ä¸ªåŠ¨æ€åº“éæ³•æ—¶ï¼Œå°±ä¼šé€ æˆ Crashã€‚</p>
</li>
</ul>
</blockquote>
<p>ç¬¬äºŒç§ï¼šé¦–å…ˆï¼Œå¼ºè¡Œè®¾ç½®åœ¨è¿è¡Œæ—¶åŠ¨æ€æŸ¥æ‰¾ç¬¦å·</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">s.pod_target_xcconfig = &#123;</span><br><span class="line">    <span class="string">'OTHER_LDFLAGS'</span> =&gt; <span class="string">'$(inherited) -undefined dynamic_lookup'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åè®¾ç½®CocoaPodsä¸è¦æ£€æŸ¥é™æ€åº“åµŒå¥—ä¾èµ– (static_framework_transitive_dependencies)ã€‚</p>
<p>åœ¨è‡ªå·±é¡¹ç›®çš„ Podfile ä¸­æ·»åŠ  pre_install è„šæœ¬ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pre_install <span class="keyword">do</span> <span class="params">|installer|</span></span><br><span class="line">    <span class="comment"># workaround for https://github.com/CocoaPods/CocoaPods/issues/3289</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">installer</span>.<span class="title">verify_no_static_framework_transitive_dependencies</span>;</span> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å¤´æ–‡ä»¶ not found çš„é—®é¢˜ï¼ŒåŸå› åœ¨äº framework çš„è¿æ¥è·¯å¾„ï¼Œéœ€è¦æŒ‡å®š</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">s.pod_target_xcconfig = &#123;</span><br><span class="line">	<span class="string">'FRAMEWORK_SEARCH_PATHS'</span> =&gt; <span class="string">'$(inherited) $&#123;PODS_ROOT&#125;/WFRFoundation/WFRFoundation-0.1.0/ios'</span>,</span><br><span class="line">    <span class="string">'OTHER_LDFLAGS'</span> =&gt; <span class="string">'$(inherited) -undefined dynamic_lookup'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„è·¯å¾„å³ WFRFoundation.framework æ‰€åœ¨çš„è·¯å¾„ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ä¸Šé¢çš„è·¯å¾„é‡Œé¢åŒ…å«äº† WFRFoundation çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘ä»¬æˆ‘ä»¬åœ¨ libB é‡Œé¢å¹¶ä¸å…³å¿ƒç‰ˆæœ¬(å…¶å®ä¾èµ–æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶ä¸èƒ½çŸ¥é“å½“å‰æ˜¯å“ªä¸ªç‰ˆæœ¬ â˜¹ï¸)ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ libA framework çš„è·¯å¾„ä¸Šç®€å•ä¸€ç‚¹ï¼Œä¸Šé¢æ˜¯å› ä¸ºç›´æ¥ä½¿ç”¨äº† pod package æ‰“åŒ…æ—¶çš„è·¯å¾„ã€‚</p>
<p>å‚è€ƒ</p>
<p><a href="https://github.com/CocoaPods/CocoaPods/issues/2926" target="_blank" rel="noopener">iOS 7 &amp; Dynamic Frameworks</a></p>
<p><a href="https://github.com/qiuxiang/react-native-amap3d/issues/370" target="_blank" rel="noopener">Static Transitive Dependencies</a></p>
<h4 id="pod-package-æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜"><a href="#pod-package-æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜" class="headerlink" title="pod package æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜"></a>pod package æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜</h4><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[!] Unable to find a specification <span class="keyword">for</span> <span class="string">`WFRFoundation`</span> depended upon by <span class="string">`WFRXxx/Core`</span></span><br></pre></td></tr></table></figure>
<p>åœºæ™¯ï¼š</p>
<blockquote>
<p>B dependency A <br><br>pod package <br></p>
</blockquote>
<p>åŸå› ï¼šæ‰¾ä¸åˆ°ä¾èµ–çš„ç§æœ‰åº“</p>
<p>è§£å†³æ–¹æ³•ï¼šæŒ‡å®šç§æœ‰åº“åœ°å€</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod package WFRFoundation.podspec --force --spec-sources=<span class="symbol">https:</span>/<span class="regexp">/github.com/redye</span><span class="regexp">/YHSpecs.git,https:/</span><span class="regexp">/github.com/</span>CocoaPods/Specs.git</span><br></pre></td></tr></table></figure>
<h4 id="pod-repo-push-æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜"><a href="#pod-repo-push-æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜" class="headerlink" title="pod repo push æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜"></a>pod repo push æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜</h4><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">Encountered an unknown error (Unable to find a specification <span class="keyword">for</span> <span class="string">`WFRFoundation`</span> depended upon by <span class="string">`WFRXxx`</span></span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ä¾èµ–åº“æ‰€åœ¨ç§æœ‰åº“åœ°å€</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod repo push YHSpecs WFRFoundation.podspec --allow-warnings --sources=<span class="symbol">https:</span>/<span class="regexp">/github.com/redye</span><span class="regexp">/YHSpecs.git,https:/</span><span class="regexp">/github.com/</span>CocoaPods/Specs.git</span><br></pre></td></tr></table></figure>
<h4 id="ç§æœ‰åº“ç›¸äº’ä¾èµ–æ—¶çš„å¯¼å…¥é—®é¢˜"><a href="#ç§æœ‰åº“ç›¸äº’ä¾èµ–æ—¶çš„å¯¼å…¥é—®é¢˜" class="headerlink" title="ç§æœ‰åº“ç›¸äº’ä¾èµ–æ—¶çš„å¯¼å…¥é—®é¢˜"></a>ç§æœ‰åº“ç›¸äº’ä¾èµ–æ—¶çš„å¯¼å…¥é—®é¢˜</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Include of non-modular header inside framework module &apos;WFRXxx.WFXxxMacros&apos;: &apos;~/WFRXxx/Example/Pods/WFRFoundation/WFRFoundation-Framework/ios/WFRFoundation.embeddedframework/WFRFoundation.framework/Headers/WFRFoundation.h&apos;</span><br></pre></td></tr></table></figure>
<p>åŸå› ï¼š</p>
<p>åœ¨ä½¿ç”¨ <code>use_frameworks!</code> æ—¶ï¼Œå› ä¸ºé“¾æ¥æ–¹å¼æ˜¯é€šè¿‡ embeded frameworkï¼ŒFramework ä¸­éƒ½åŒ…æ¶µäº†ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„ Module å’Œä¸€ä¸ª umbrella æ–‡ä»¶ï¼ŒModule æ–‡ä»¶åœ¨å·¥ç¨‹ä¸­æ˜¯ä¸å¯è§çš„ï¼Œæ˜¯åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆçš„ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿæˆçš„.frameworkæ–‡ä»¶ä¸­æ‰¾åˆ°module.modulemapè¿™ä¸ªæ–‡ä»¶ï¼Œå°±æ˜¯å‰é¢æˆ‘ä»¬æ‰€è¯´çš„ Moduleã€‚ä¾èµ–ç¬¬ä¸‰æ–¹é™æ€åº“æ—¶ï¼Œç¬¬ä¸‰æ–¹çš„é™æ€åº“ Framework å¹¶æ²¡æœ‰ä½¿ç”¨ Moduleï¼Œåœ¨ .h æ–‡ä»¶ä¸­ç›´æ¥å¼•å…¥ï¼Œåœ¨è¿›è¡ŒFramework åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å¼•ç”¨äº†è¿™æ ·çš„ Frameworkï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<ul>
<li>ä¸ä½¿ç”¨ <code>use_frameworks!</code> ã€‚</li>
<li>åœ¨ Build Settings è®¾ç½® Allow Non-modular Includes In Framework Modules ä¸º yesï¼Œå…è®¸æˆ‘ä»¬å¿½ç•¥æ‰è¿™ä¸ªé”™è¯¯åˆ™å¯ä»¥åœ¨ Framework ä¸­ä½¿ç”¨æ¨¡å—å¤–çš„ Includeï¼Œè¿™ç§æ–¹æ³•è¿‡äºç²—æš´ï¼Œè€Œä¸”åªé’ˆå¯¹äºåœ¨ç›®æ ‡å·¥ç¨‹ä¸­ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ç°åœ¨æ­£è¦æ‰“åŒ…çš„ WFRXxx åº“ã€‚</li>
<li>éœ€è¦å‡çº§ Cocoapods å’Œ cocoapods-packagerï¼Œåœ¨ 2.7 ç‰ˆæœ¬ä»¥ä¸Šä¿®å¤äº† modulemap çš„é—®é¢˜ã€‚</li>
</ul>
<p>å‚è€ƒ <a href="https://www.jianshu.com/p/a1d2d148fdd3" target="_blank" rel="noopener">è®©CocoaPods static libraryæ”¯æŒModule</a></p>
<h4 id="ä¾èµ–é™æ€åº“æ—¶æ‰“åŒ…é”™è¯¯"><a href="#ä¾èµ–é™æ€åº“æ—¶æ‰“åŒ…é”™è¯¯" class="headerlink" title="ä¾èµ–é™æ€åº“æ—¶æ‰“åŒ…é”™è¯¯"></a>ä¾èµ–é™æ€åº“æ—¶æ‰“åŒ…é”™è¯¯</h4><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[!] podspec has binary-only depedencies, mangling <span class="keyword">not</span> possible.</span><br></pre></td></tr></table></figure>
<p>åœºæ™¯ï¼š<br>ä¾èµ–äº†ç¬¬ä¸‰æ–¹çš„é™æ€åº“</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>åŠ ä¸Š <code>--no-mangle</code> é€‰é¡¹ï¼Œè¡¨ç¤ºæœ‰ä¾èµ–ã€‚</p>
<p>åŠ ä¸Š <code>--exclude-deps</code> é€‰é¡¹ï¼Œè¡¨ç¤ºåœ¨æ‰“åŒ…çš„æ—¶å€™æ’é™¤ä¾èµ–åº“çš„ç¬¦å·è¡¨ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªé€‰é¡¹ï¼ŒåŒæ ·ä¼šæŠ¥é”™ <code>Undefined symbols for architecture x86_64</code> ã€‚</p>
<p>å³ <code>--no-mangle</code> ä¸ <code>--exclude-deps</code> éœ€è¦åŒæ—¶ä½¿ç”¨ã€‚</p>
<h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><h4 id="æ¸…é™¤ç¼“å­˜"><a href="#æ¸…é™¤ç¼“å­˜" class="headerlink" title="æ¸…é™¤ç¼“å­˜"></a>æ¸…é™¤ç¼“å­˜</h4><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">pod cache clean WFFoundation</span><br></pre></td></tr></table></figure>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://nshipster.cn/cocoapods/" target="_blank" rel="noopener">Cocoaâ€‹Pods</a></p>
<p><a href="https://www.zybuluo.com/qidiandasheng/note/595740" target="_blank" rel="noopener">PodäºŒè¿›åˆ¶åŒ–</a></p>
<p><a href="https://www.jianshu.com/p/a243b62b2e72" target="_blank" rel="noopener">iOSç»å…¸é”™è¯¯Undefined symbols for architecture XXX</a></p>
<p><a href="https://www.zybuluo.com/qidiandasheng/note/603907" target="_blank" rel="noopener">iOSé‡Œçš„åŠ¨æ€åº“å’Œé™æ€åº“</a></p>
<p><a href="http://www.skyfox.org/ios-framework-commoncrypto.html" target="_blank" rel="noopener">iOSå¼€å‘åŸºäºObjective-Cçš„Frameworkä¸­ä½¿ç”¨CommonCrypto</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
            <a href="/tags/Cocoapods/" rel="tag"># Cocoapods</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/19/create-private-pods/" rel="next" title="åˆ›å»ºç§æœ‰åº“">
                <i class="fa fa-chevron-left"></i> åˆ›å»ºç§æœ‰åº“
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/25/hello-redye/" rel="prev" title="å°çº¢å®¶ã®">
                å°çº¢å®¶ã® <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpeg" alt="å°çº¢">
            
              <p class="site-author-name" itemprop="name">å°çº¢</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/redye" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:sixwalnut@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#CocoaPods-Packager-å®‰è£…ä¸ä½¿ç”¨"><span class="nav-number">1.</span> <span class="nav-text">CocoaPods-Packager å®‰è£…ä¸ä½¿ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#use-frameworks"><span class="nav-number">2.</span> <span class="nav-text">use_frameworks!</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é—®é¢˜"><span class="nav-number">3.</span> <span class="nav-text">é—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#é™æ€åº“ä¼ é€’é—®é¢˜"><span class="nav-number">3.1.</span> <span class="nav-text">é™æ€åº“ä¼ é€’é—®é¢˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pod-package-æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜"><span class="nav-number">3.2.</span> <span class="nav-text">pod package æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pod-repo-push-æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜"><span class="nav-number">3.3.</span> <span class="nav-text">pod repo push æ—¶ä¾èµ–åº“ä¼ é€’é—®é¢˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç§æœ‰åº“ç›¸äº’ä¾èµ–æ—¶çš„å¯¼å…¥é—®é¢˜"><span class="nav-number">3.4.</span> <span class="nav-text">ç§æœ‰åº“ç›¸äº’ä¾èµ–æ—¶çš„å¯¼å…¥é—®é¢˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¾èµ–é™æ€åº“æ—¶æ‰“åŒ…é”™è¯¯"><span class="nav-number">3.5.</span> <span class="nav-text">ä¾èµ–é™æ€åº“æ—¶æ‰“åŒ…é”™è¯¯</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¸¸ç”¨å‘½ä»¤"><span class="nav-number">4.</span> <span class="nav-text">å¸¸ç”¨å‘½ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ¸…é™¤ç¼“å­˜"><span class="nav-number">4.1.</span> <span class="nav-text">æ¸…é™¤ç¼“å­˜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‚è€ƒ"><span class="nav-number">5.</span> <span class="nav-text">å‚è€ƒ</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å°çº¢</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
